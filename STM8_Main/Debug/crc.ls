   1                     ; C Compiler for STM8 (COSMIC Software)
   2                     ; Parser V4.12.5 - 16 Jun 2021
   3                     ; Generator (Limited) V4.5.3 - 16 Jun 2021
  15                     .const:	section	.text
  16  0000               _crc16_table:
  17  0000 0000          	dc.w	0
  18  0002 1021          	dc.w	4129
  19  0004 2042          	dc.w	8258
  20  0006 3063          	dc.w	12387
  21  0008 4084          	dc.w	16516
  22  000a 50a5          	dc.w	20645
  23  000c 60c6          	dc.w	24774
  24  000e 70e7          	dc.w	28903
  25  0010 8108          	dc.w	-32504
  26  0012 9129          	dc.w	-28375
  27  0014 a14a          	dc.w	-24246
  28  0016 b16b          	dc.w	-20117
  29  0018 c18c          	dc.w	-15988
  30  001a d1ad          	dc.w	-11859
  31  001c e1ce          	dc.w	-7730
  32  001e f1ef          	dc.w	-3601
  33  0020 1231          	dc.w	4657
  34  0022 0210          	dc.w	528
  35  0024 3273          	dc.w	12915
  36  0026 2252          	dc.w	8786
  37  0028 52b5          	dc.w	21173
  38  002a 4294          	dc.w	17044
  39  002c 72f7          	dc.w	29431
  40  002e 62d6          	dc.w	25302
  41  0030 9339          	dc.w	-27847
  42  0032 8318          	dc.w	-31976
  43  0034 b37b          	dc.w	-19589
  44  0036 a35a          	dc.w	-23718
  45  0038 d3bd          	dc.w	-11331
  46  003a c39c          	dc.w	-15460
  47  003c f3ff          	dc.w	-3073
  48  003e e3de          	dc.w	-7202
  49  0040 2462          	dc.w	9314
  50  0042 3443          	dc.w	13379
  51  0044 0420          	dc.w	1056
  52  0046 1401          	dc.w	5121
  53  0048 64e6          	dc.w	25830
  54  004a 74c7          	dc.w	29895
  55  004c 44a4          	dc.w	17572
  56  004e 5485          	dc.w	21637
  57  0050 a56a          	dc.w	-23190
  58  0052 b54b          	dc.w	-19125
  59  0054 8528          	dc.w	-31448
  60  0056 9509          	dc.w	-27383
  61  0058 e5ee          	dc.w	-6674
  62  005a f5cf          	dc.w	-2609
  63  005c c5ac          	dc.w	-14932
  64  005e d58d          	dc.w	-10867
  65  0060 3653          	dc.w	13907
  66  0062 2672          	dc.w	9842
  67  0064 1611          	dc.w	5649
  68  0066 0630          	dc.w	1584
  69  0068 76d7          	dc.w	30423
  70  006a 66f6          	dc.w	26358
  71  006c 5695          	dc.w	22165
  72  006e 46b4          	dc.w	18100
  73  0070 b75b          	dc.w	-18597
  74  0072 a77a          	dc.w	-22662
  75  0074 9719          	dc.w	-26855
  76  0076 8738          	dc.w	-30920
  77  0078 f7df          	dc.w	-2081
  78  007a e7fe          	dc.w	-6146
  79  007c d79d          	dc.w	-10339
  80  007e c7bc          	dc.w	-14404
  81  0080 48c4          	dc.w	18628
  82  0082 58e5          	dc.w	22757
  83  0084 6886          	dc.w	26758
  84  0086 78a7          	dc.w	30887
  85  0088 0840          	dc.w	2112
  86  008a 1861          	dc.w	6241
  87  008c 2802          	dc.w	10242
  88  008e 3823          	dc.w	14371
  89  0090 c9cc          	dc.w	-13876
  90  0092 d9ed          	dc.w	-9747
  91  0094 e98e          	dc.w	-5746
  92  0096 f9af          	dc.w	-1617
  93  0098 8948          	dc.w	-30392
  94  009a 9969          	dc.w	-26263
  95  009c a90a          	dc.w	-22262
  96  009e b92b          	dc.w	-18133
  97  00a0 5af5          	dc.w	23285
  98  00a2 4ad4          	dc.w	19156
  99  00a4 7ab7          	dc.w	31415
 100  00a6 6a96          	dc.w	27286
 101  00a8 1a71          	dc.w	6769
 102  00aa 0a50          	dc.w	2640
 103  00ac 3a33          	dc.w	14899
 104  00ae 2a12          	dc.w	10770
 105  00b0 dbfd          	dc.w	-9219
 106  00b2 cbdc          	dc.w	-13348
 107  00b4 fbbf          	dc.w	-1089
 108  00b6 eb9e          	dc.w	-5218
 109  00b8 9b79          	dc.w	-25735
 110  00ba 8b58          	dc.w	-29864
 111  00bc bb3b          	dc.w	-17605
 112  00be ab1a          	dc.w	-21734
 113  00c0 6ca6          	dc.w	27814
 114  00c2 7c87          	dc.w	31879
 115  00c4 4ce4          	dc.w	19684
 116  00c6 5cc5          	dc.w	23749
 117  00c8 2c22          	dc.w	11298
 118  00ca 3c03          	dc.w	15363
 119  00cc 0c60          	dc.w	3168
 120  00ce 1c41          	dc.w	7233
 121  00d0 edae          	dc.w	-4690
 122  00d2 fd8f          	dc.w	-625
 123  00d4 cdec          	dc.w	-12820
 124  00d6 ddcd          	dc.w	-8755
 125  00d8 ad2a          	dc.w	-21206
 126  00da bd0b          	dc.w	-17141
 127  00dc 8d68          	dc.w	-29336
 128  00de 9d49          	dc.w	-25271
 129  00e0 7e97          	dc.w	32407
 130  00e2 6eb6          	dc.w	28342
 131  00e4 5ed5          	dc.w	24277
 132  00e6 4ef4          	dc.w	20212
 133  00e8 3e13          	dc.w	15891
 134  00ea 2e32          	dc.w	11826
 135  00ec 1e51          	dc.w	7761
 136  00ee 0e70          	dc.w	3696
 137  00f0 ff9f          	dc.w	-97
 138  00f2 efbe          	dc.w	-4162
 139  00f4 dfdd          	dc.w	-8227
 140  00f6 cffc          	dc.w	-12292
 141  00f8 bf1b          	dc.w	-16613
 142  00fa af3a          	dc.w	-20678
 143  00fc 9f59          	dc.w	-24743
 144  00fe 8f78          	dc.w	-28808
 145  0100 9188          	dc.w	-28280
 146  0102 81a9          	dc.w	-32343
 147  0104 b1ca          	dc.w	-20022
 148  0106 a1eb          	dc.w	-24085
 149  0108 d10c          	dc.w	-12020
 150  010a c12d          	dc.w	-16083
 151  010c f14e          	dc.w	-3762
 152  010e e16f          	dc.w	-7825
 153  0110 1080          	dc.w	4224
 154  0112 00a1          	dc.w	161
 155  0114 30c2          	dc.w	12482
 156  0116 20e3          	dc.w	8419
 157  0118 5004          	dc.w	20484
 158  011a 4025          	dc.w	16421
 159  011c 7046          	dc.w	28742
 160  011e 6067          	dc.w	24679
 161  0120 83b9          	dc.w	-31815
 162  0122 9398          	dc.w	-27752
 163  0124 a3fb          	dc.w	-23557
 164  0126 b3da          	dc.w	-19494
 165  0128 c33d          	dc.w	-15555
 166  012a d31c          	dc.w	-11492
 167  012c e37f          	dc.w	-7297
 168  012e f35e          	dc.w	-3234
 169  0130 02b1          	dc.w	689
 170  0132 1290          	dc.w	4752
 171  0134 22f3          	dc.w	8947
 172  0136 32d2          	dc.w	13010
 173  0138 4235          	dc.w	16949
 174  013a 5214          	dc.w	21012
 175  013c 6277          	dc.w	25207
 176  013e 7256          	dc.w	29270
 177  0140 b5ea          	dc.w	-18966
 178  0142 a5cb          	dc.w	-23093
 179  0144 95a8          	dc.w	-27224
 180  0146 8589          	dc.w	-31351
 181  0148 f56e          	dc.w	-2706
 182  014a e54f          	dc.w	-6833
 183  014c d52c          	dc.w	-10964
 184  014e c50d          	dc.w	-15091
 185  0150 34e2          	dc.w	13538
 186  0152 24c3          	dc.w	9411
 187  0154 14a0          	dc.w	5280
 188  0156 0481          	dc.w	1153
 189  0158 7466          	dc.w	29798
 190  015a 6447          	dc.w	25671
 191  015c 5424          	dc.w	21540
 192  015e 4405          	dc.w	17413
 193  0160 a7db          	dc.w	-22565
 194  0162 b7fa          	dc.w	-18438
 195  0164 8799          	dc.w	-30823
 196  0166 97b8          	dc.w	-26696
 197  0168 e75f          	dc.w	-6305
 198  016a f77e          	dc.w	-2178
 199  016c c71d          	dc.w	-14563
 200  016e d73c          	dc.w	-10436
 201  0170 26d3          	dc.w	9939
 202  0172 36f2          	dc.w	14066
 203  0174 0691          	dc.w	1681
 204  0176 16b0          	dc.w	5808
 205  0178 6657          	dc.w	26199
 206  017a 7676          	dc.w	30326
 207  017c 4615          	dc.w	17941
 208  017e 5634          	dc.w	22068
 209  0180 d94c          	dc.w	-9908
 210  0182 c96d          	dc.w	-13971
 211  0184 f90e          	dc.w	-1778
 212  0186 e92f          	dc.w	-5841
 213  0188 99c8          	dc.w	-26168
 214  018a 89e9          	dc.w	-30231
 215  018c b98a          	dc.w	-18038
 216  018e a9ab          	dc.w	-22101
 217  0190 5844          	dc.w	22596
 218  0192 4865          	dc.w	18533
 219  0194 7806          	dc.w	30726
 220  0196 6827          	dc.w	26663
 221  0198 18c0          	dc.w	6336
 222  019a 08e1          	dc.w	2273
 223  019c 3882          	dc.w	14466
 224  019e 28a3          	dc.w	10403
 225  01a0 cb7d          	dc.w	-13443
 226  01a2 db5c          	dc.w	-9380
 227  01a4 eb3f          	dc.w	-5313
 228  01a6 fb1e          	dc.w	-1250
 229  01a8 8bf9          	dc.w	-29703
 230  01aa 9bd8          	dc.w	-25640
 231  01ac abbb          	dc.w	-21573
 232  01ae bb9a          	dc.w	-17510
 233  01b0 4a75          	dc.w	19061
 234  01b2 5a54          	dc.w	23124
 235  01b4 6a37          	dc.w	27191
 236  01b6 7a16          	dc.w	31254
 237  01b8 0af1          	dc.w	2801
 238  01ba 1ad0          	dc.w	6864
 239  01bc 2ab3          	dc.w	10931
 240  01be 3a92          	dc.w	14994
 241  01c0 fd2e          	dc.w	-722
 242  01c2 ed0f          	dc.w	-4849
 243  01c4 dd6c          	dc.w	-8852
 244  01c6 cd4d          	dc.w	-12979
 245  01c8 bdaa          	dc.w	-16982
 246  01ca ad8b          	dc.w	-21109
 247  01cc 9de8          	dc.w	-25112
 248  01ce 8dc9          	dc.w	-29239
 249  01d0 7c26          	dc.w	31782
 250  01d2 6c07          	dc.w	27655
 251  01d4 5c64          	dc.w	23652
 252  01d6 4c45          	dc.w	19525
 253  01d8 3ca2          	dc.w	15522
 254  01da 2c83          	dc.w	11395
 255  01dc 1ce0          	dc.w	7392
 256  01de 0cc1          	dc.w	3265
 257  01e0 ef1f          	dc.w	-4321
 258  01e2 ff3e          	dc.w	-194
 259  01e4 cf5d          	dc.w	-12451
 260  01e6 df7c          	dc.w	-8324
 261  01e8 af9b          	dc.w	-20581
 262  01ea bfba          	dc.w	-16454
 263  01ec 8fd9          	dc.w	-28711
 264  01ee 9ff8          	dc.w	-24584
 265  01f0 6e17          	dc.w	28183
 266  01f2 7e36          	dc.w	32310
 267  01f4 4e55          	dc.w	20053
 268  01f6 5e74          	dc.w	24180
 269  01f8 2e93          	dc.w	11923
 270  01fa 3eb2          	dc.w	16050
 271  01fc 0ed1          	dc.w	3793
 272  01fe 1ef0          	dc.w	7920
 341                     ; 39 uint16_t get_crc(const uint8_t *data, const uint16_t length)
 341                     ; 40 {
 343                     	switch	.text
 344  0000               _get_crc:
 346  0000 89            	pushw	x
 347  0001 5203          	subw	sp,#3
 348       00000003      OFST:	set	3
 351                     ; 42     uint16_t crc = 0xFFFF;
 353  0003 aeffff        	ldw	x,#65535
 354  0006 1f02          	ldw	(OFST-1,sp),x
 356                     ; 43     for(i = 0; i < length; ++i){
 358  0008 0f01          	clr	(OFST-2,sp)
 361  000a 202a          	jra	L74
 362  000c               L34:
 363                     ; 44         crc = (crc << 8) ^ crc16_table[(crc >> 8) ^ *data++];
 365  000c 1e02          	ldw	x,(OFST-1,sp)
 366  000e 4f            	clr	a
 367  000f 01            	rrwa	x,a
 368  0010 01            	rrwa	x,a
 369  0011 1604          	ldw	y,(OFST+1,sp)
 370  0013 72a90001      	addw	y,#1
 371  0017 1704          	ldw	(OFST+1,sp),y
 372  0019 72a20001      	subw	y,#1
 373  001d 90f8          	xor	a,(y)
 374  001f 02            	rlwa	x,a
 375  0020 58            	sllw	x
 376  0021 1602          	ldw	y,(OFST-1,sp)
 377  0023 4f            	clr	a
 378  0024 9002          	rlwa	y,a
 379  0026 9001          	rrwa	y,a
 380  0028 d80001        	xor	a,(_crc16_table+1,x)
 381  002b 9001          	rrwa	y,a
 382  002d d80000        	xor	a,(_crc16_table,x)
 383  0030 9001          	rrwa	y,a
 384  0032 1702          	ldw	(OFST-1,sp),y
 386                     ; 43     for(i = 0; i < length; ++i){
 388  0034 0c01          	inc	(OFST-2,sp)
 390  0036               L74:
 393  0036 7b01          	ld	a,(OFST-2,sp)
 394  0038 5f            	clrw	x
 395  0039 97            	ld	xl,a
 396  003a 1308          	cpw	x,(OFST+5,sp)
 397  003c 25ce          	jrult	L34
 398                     ; 47     return crc;
 400  003e 1e02          	ldw	x,(OFST-1,sp)
 403  0040 5b05          	addw	sp,#5
 404  0042 81            	ret
 449                     ; 50 void get_crc_by_byte(uint16_t *crc_value, const uint8_t byte)
 449                     ; 51 {
 450                     	switch	.text
 451  0043               _get_crc_by_byte:
 453  0043 89            	pushw	x
 454       00000000      OFST:	set	0
 457                     ; 52     *crc_value = (*crc_value << 8) ^ crc16_table[(*crc_value >> 8) ^ byte];
 459  0044 fe            	ldw	x,(x)
 460  0045 4f            	clr	a
 461  0046 01            	rrwa	x,a
 462  0047 01            	rrwa	x,a
 463  0048 1805          	xor	a,(OFST+5,sp)
 464  004a 02            	rlwa	x,a
 465  004b 58            	sllw	x
 466  004c 1601          	ldw	y,(OFST+1,sp)
 467  004e 90fe          	ldw	y,(y)
 468  0050 4f            	clr	a
 469  0051 9002          	rlwa	y,a
 470  0053 9001          	rrwa	y,a
 471  0055 d80001        	xor	a,(_crc16_table+1,x)
 472  0058 9001          	rrwa	y,a
 473  005a d80000        	xor	a,(_crc16_table,x)
 474  005d 9001          	rrwa	y,a
 475  005f 1e01          	ldw	x,(OFST+1,sp)
 476  0061 ff            	ldw	(x),y
 477                     ; 53 }
 480  0062 85            	popw	x
 481  0063 81            	ret
 506                     	xdef	_crc16_table
 507                     	xdef	_get_crc_by_byte
 508                     	xdef	_get_crc
 527                     	end
